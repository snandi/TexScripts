1. Save the parameter settings for a simulation run in ArgRun04.txt, etc. 

2. Generate the data using the RScript11-00_GenerateCurves.R. It should be run on one of the nebula servers. The generated data for all the seeds will be in the folders: /z/Proj/newtongroup/snandi/Simulation_Registration/Run04/

3. Create the Iter folders in each Seed folders in Run04. Do:
   cd /z/Proj/newtongroup/snandi/Simulation_Registration/ShellScripts_forCondor/
   ./_createIterFolders_MultipleSeeds.sh "Run04" 1 500 0 999

4. Run RScript10-01_getPValue_Before.R to estimate the p-values before registration. This p-value is for testing distinguishability between two groups of each seed. Run it on nebula servers.

5. Create submit files for bcg: to run the registration of two groups of each seed. This validates that Type 1 error doesn't change before and after registration. Go to /z/Proj/newtongroup/snandi/Simulation_Registration/ShellScripts_forCondor/ and run
./_createCondorSubmitFile_forBCG.sh "Run04" 1 500

6. Run the RScript10-02_permute_iterate_register.R on bcg condor pool, to permute, iterate and register the curves of two groups of same seeds and establish that the p-values are still uniform. This establishes that the registration procedure is not registering noise. 
Go to /z/Proj/newtongroup/snandi/Simulation_Registration/RScripts_forCondor/
Do: nohup ../ShellScripts_forCondor/_runCondorSubmit_Null.sh 1 500 120 "Run04" > condorRun04_Null.out &

7. In order to estimate the distance between the curves generated by different seeds, run the script RScript10-06_DistanceBetweenSeeds.R. It should be run on nebula servers, preferably the ones with 24 cores.

8. Load the p-values data and identify the seed pairs that will be tested for iterated registration, to check for increase in power. To do this, run RScript10-06_LoadDistanceBetweenSeeds.R

9. To get the T_Stats_Obs after registration, run RScript10-07_register_DifferentSeeds.R. It should be run on nebula servers. Do this while the condor jobs are running on chtc.
9a. Since this takes a long time, a condor version was developed: To use this, run ../ShellScripts_forCondor/_createDagSubmitFile_withVARS.sh SeedsForPower.txt > dagSubmit_Run04_2015-12-19.dag
Then do condor_submit_dag dagSubmit_Run04_2015-12-19.dag on BCG condor pool

10. Transfer simulation data to chtc: On submit-5, create shared_SeedData folder in /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run04/
Then, do scp Seed*/SimData_Seed*.RData snandi@submit-5.chtc.wisc.edu:ChtcRun/Project_CurveReg/Simulation_Registration/Run04/shared_SeedData/.
Transfer SeedsForPower.txt to chtc

11. On submit-5, in the folder /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run04/, run
_createFoldersforMultipleSeeds.sh SeedsForPower.txt "Run04"
This will create the seed pair folders

12. Copy ArgRun04.txt from bcg to chtc, in the shared folder. Update the arg filename in the r script: RScript10-08_chtc.R

13. Copy submitFile_VAR.txt from /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run03/submitFiles/ to /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run04/ and replace 'Run03' with 'Run04'

14. Go inside /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run04/ and run _createIterFolders_loop.sh SeedsForPower.txt "Run04"

15. Copy chtcjobwapper and chtcinnerwrapper from /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run03/ to Run04/

16. Create the dagman file by _createDagSubmitFile_withVARs.sh SeedsForPower.txt > dagSubmit_Run04_2015-12-08.dag

17. To submit dagman jobs, do: condor_submit_dag dagSubmit_Run04_2015-12-08.dag_test. Before submitting jobs for all the seed, test it out with few jobs.

18. Then, split the large dagSubmit_Run04_2015-12-08.dag file by: split -l 707000 dagSubmit_Run04_2015-12-08.dag dagSubmit_Run04. This will produce five smaller dagman files. Add the line CONFIG dagman_config at the beginning of each of these smaller files.

19. Then, start each of the above smaller files by: condor_submit_dag dagSubmit_Run04aa

20. Once the condor jobs are complete on chtc, then do the following to copy over the results:
    cd /home/snandi/ChtcRun/Project_CurveReg/Simulation_Registration/Run04/ 
    ../ShellScripts_forCondor/_createIterFolders_loop.sh SeedsForPower.txt "Run04"  %to create the Seed cross folders and iter folders inside them
    ../ShellScripts_forCondor/_copyOutputfromCHTC.sh SeedsForPower.txt "Run04"      %copy files from chtc to bcg


